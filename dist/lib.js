function c(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function u(n,...t){let e=[];for(let s=0;s<n.length;s++){e.push(c(n[s]));let r=t[s];typeof r=="string"?e.push(c(r)):r instanceof RegExp&&e.push(r.source)}if(!e[0].startsWith("#/"))throw new Error(`Routes must start with "#/"; route is ${e.join("")}`);return new RegExp(`^${e.join("")}$`)}function l(n){return new RegExp(`(?<${n}>\\w+)`)}var a=class{#t=new Map;#s=void 0;#n=void 0;#e=void 0;constructor(t){this.#e=t?.startAt}connect(){return addEventListener("popstate",()=>{this.#r()}),this.#e&&!location.hash?location.hash=this.#e:this.#r(),this}on(t,e){return this.#t.set(t,e),this}off(t){return this.#t.delete(t),this}fallback(t){return this.#s=t,this}afterEach(t){return this.#n=t,this}#r(t=location.hash){let e,s,r,o;for(let[i,f]of this.#t.entries())if(typeof i=="string"&&t===i?s=f:i instanceof RegExp&&(r=t.match(i))&&(o={...r.groups},s=f),s){e=i;break}let h={url:t,params:o??{},route:e};(s??this.#s)?.(h),this.#n?.(h)}};export{a as default,l as param,u as route};
//# sourceMappingURL=lib.js.map
